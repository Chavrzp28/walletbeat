---
// Types/constants
import { defaultNavigationItems } from '@/constants/navigation'
import { repositoryUrl } from '@/constants'
import { markdown } from '@/types/content'

// Components
import Layout from '@/layouts/Layout.astro'
import Eip7702Table from '@/views/Eip7702Table.svelte'
import Navigation from '@/views/Navigation.astro'
import Typography from '@/components/Typography.svelte'
import GitHubIcon from 'lucide-static/icons/github.svg?raw'
---

<Layout
	metadata={{
		title: 'Walletbeat - EIP-7702 wallet adoption',
		description:
			'Which wallets implement EIP-7702? Track the adoption of EIP-7702 across the Ethereum wallet ecosystem.',
	}}
>
	<Navigation navigationItems={defaultNavigationItems} />

	<main data-sticky-container data-column='gap-8'>
		<header data-sticky='inline' data-scroll-item='inline-detached padding-match-start'>
			{/* @ts-expect-error - Astro type checking doesn't fully support Svelte 5 generics yet */}
			<Typography
				content={markdown(`
						# EIP-7702 Adoption Tracker

						Which wallets implement [EIP-7702](https://eip.tools/eip/7702)? How compliant and standardized is their implementation? Which new 7702-enabled features does each wallet support?

						Inspired by [7702 Beat](https://swiss-knife.xyz/7702beat), from the great folks at [Swiss-Knife.xyz](https://swiss-knife.xyz). Also check out [BundleBear's EIP-7702 contract tracker](https://www.bundlebear.com/eip7702-authorized-contracts/all)!
					`)}
			/>
		</header>

		<Eip7702Table title='Software Wallets by EIP-7702 Support' client:load />

		<footer data-scroll-item='inline-detached padding-match-end' data-row='center'>
			<p>
				Incorrect data? Submit a PR: <a
					href={repositoryUrl}
					target='_blank'
					rel='noopener noreferrer'
					class='github-link'
					data-row='gap-2'><span set:html={GitHubIcon} />GitHub Repository</a
				>
			</p>
		</footer>
	</main>
</Layout>

<style>
	main {
		&[data-sticky-container] {
			--scrollItem-inlineDetached-maxSize: 60.5rem;
			--scrollItem-inlineDetached-paddingStart: clamp(
				1.5rem,
				0.04 * var(--scrollContainer-sizeInline),
				3rem
			);
			--scrollItem-inlineDetached-maxPaddingMatchStart: 5rem;
			--scrollItem-inlineDetached-paddingEnd: clamp(
				1.5rem,
				0.04 * var(--scrollContainer-sizeInline),
				3rem
			);
			--scrollItem-inlineDetached-maxPaddingMatchEnd: 5rem;
		}
	}

	header {
		h1 {
			font-size: 2.5rem;
			font-weight: 800;
			margin-bottom: 1rem;
		}
	}

	footer {
		p {
			color: var(--text-secondary);
			font-size: 0.9rem;
		}

		.github-link {
			margin-left: 0.5rem;
			padding: 0.5rem 1rem;
			background: var(--background-primary);
			border: 1px solid var(--border-color);
			border-radius: 0.375rem;
			text-decoration: none;
			color: var(--text-primary);

			&:hover {
				background: var(--background-secondary);
				text-decoration: none;
			}

			span {
				width: 1rem;
				height: 1rem;
				opacity: 0.8;
			}
		}
	}
</style>
